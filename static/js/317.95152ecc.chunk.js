(self.webpackChunkpizza_app=self.webpackChunkpizza_app||[]).push([[317],{1439:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return S}});var t=n(8683),s=n(3433),i=n(4165),c=n(5861),a=n(2808),o=n.n(a),l=n(9434),u=n(2791),d=n(7689),p=n(184),h=["\u0412\u0441\u0435","\u041c\u044f\u0441\u043d\u044b\u0435","\u0412\u0435\u0433\u0435\u0442\u0430\u0440\u0438\u0430\u043d\u0441\u043a\u0430\u044f","\u0413\u0440\u0438\u043b\u044c","\u041e\u0441\u0442\u0440\u044b\u0435","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435"],f=(0,u.memo)((function(e){var r=e.value,n=e.onChangeCategory;return(0,p.jsx)("div",{className:"categories",children:(0,p.jsx)("ul",{children:h.map((function(e,t){return(0,p.jsx)("li",{onClick:function(){return n(t)},className:r===t?"active":"",children:e},t)}))})})})),m=n(9439),x=n(2322),g=n(5439),v=[{sortProperty:g.W.RATING_DESC,name:"\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438(desk)"},{sortProperty:g.W.RATING_ASC,name:"\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438(ask)"},{sortProperty:g.W.PRICE_DESC,name:"\u0446\u0435\u043d\u0435(desk)"},{sortProperty:g.W.PRICE_ASC,name:"\u0446\u0435\u043d\u0435(ask)"},{sortProperty:g.W.TITLE_DESC,name:"\u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443(desk)"},{sortProperty:g.W.TITLE_ASC,name:"\u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443(ask)"}],j=(0,u.memo)((function(e){var r=e.value,n=(0,u.useRef)(null),t=(0,u.useState)(!1),s=(0,m.Z)(t,2),i=s[0],c=s[1],a=(0,l.I0)();(0,u.useEffect)((function(){var e=function(e){e.target&&n.current&&(e.target.closest(".".concat(n.current.className))||c(!1))};return i&&document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[i]);return(0,p.jsxs)("div",{ref:n,className:"sort",children:[(0,p.jsxs)("div",{className:"sort__label",children:[(0,p.jsx)("svg",{className:i?"":"svg__disabled",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})}),(0,p.jsx)("div",{children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e:"}),(0,p.jsx)("span",{onClick:function(){return c(!i)},children:r.name})]}),i&&(0,p.jsx)("div",{className:"sort__popup",children:(0,p.jsx)("ul",{children:v.map((function(e,n){return(0,p.jsx)("li",{onClick:function(){return function(e){a((0,x.HD)(e)),c(!1)}(e)},className:r.sortProperty===e.sortProperty?"active":"",children:e.name},n)}))})})]})})),C=n(1857),y=n(3827),z=function(e){var r=e.id,n=e.title,t=e.price,s=e.img,i=e.sizes,c=(0,d.s0)(),a=(0,l.I0)(),o=(0,l.v9)((0,y.B)(r)),h=(null===o||void 0===o?void 0:o.count)||0,f=["\u0442\u043e\u043d\u043a\u043e\u0435","\u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0435"],x=(0,u.useState)(0),g=(0,m.Z)(x,2),v=g[0],j=g[1],z=(0,u.useState)(0),_=(0,m.Z)(z,2),w=_[0],k=_[1];return(0,p.jsxs)("div",{className:"pizza-block-wrapper",children:[" ",(0,p.jsxs)("div",{className:"pizza-block",children:[(0,p.jsx)("img",{onClick:function(){c("pizza/"+r)},className:"pizza-block__image",src:"https://thumbs.dreamstime.com/b/pepperoni-pizza-thinly-sliced-popular-topping-american-style-pizzerias-30402134.jpg",alt:"Pizza"}),(0,p.jsx)("h4",{className:"pizza-block__title",children:n}),(0,p.jsxs)("div",{className:"pizza-block__selector",children:[(0,p.jsx)("ul",{children:f.map((function(e,r){return(0,p.jsx)("li",{onClick:function(){return j(r)},className:v===r?"active":"",children:e},r)}))}),(0,p.jsx)("ul",{children:i.map((function(e,r){return(0,p.jsx)("li",{className:w===r?"active":"",onClick:function(){return k(r)},children:e},r)}))})]}),(0,p.jsxs)("div",{className:"pizza-block__bottom",children:[(0,p.jsxs)("div",{className:"pizza-block__price",children:["\u043e\u0442 ",t,"\u20b4"]}),(0,p.jsxs)("div",{className:"button button--outline button--add",onClick:function(){var e={title:n,id:r,price:t,img:s,type:f[v],size:i[w],count:0};a((0,C.jX)(e))},children:[(0,p.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)("path",{d:"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z",fill:"white"})}),(0,p.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,p.jsx)("i",{children:h})]})]})]})]})},_=n(6048),w=n.n(_),k="Pagination_pagination__0Sl6w",P=function(e){var r=e.currentPage,n=e.onChangePage;return(0,p.jsx)(w(),{className:k,breakLabel:"...",nextLabel:">",onPageChange:function(e){return n(e.selected+1)},pageRangeDisplayed:8,pageCount:3,forcePage:r-1,previousLabel:"<"})},b=n(8175),N=function(e){return(0,p.jsx)("div",{className:"pizza-block-wrapper",children:(0,p.jsxs)(b.ZP,(0,t.Z)((0,t.Z)({className:"pizza-block",speed:2,width:280,height:466,viewBox:"0 0 280 485",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[(0,p.jsx)("rect",{x:"0",y:"265",rx:"15",ry:"15",width:"280",height:"30"}),(0,p.jsx)("circle",{cx:"140",cy:"128",r:"125"}),(0,p.jsx)("rect",{x:"0",y:"310",rx:"10",ry:"10",width:"280",height:"90"}),(0,p.jsx)("rect",{x:"0",y:"427",rx:"10",ry:"10",width:"95",height:"35"}),(0,p.jsx)("rect",{x:"126",y:"421",rx:"25",ry:"29",width:"145",height:"45"})]}))})},E=n(4917),Z=n(9918),R=function(e){return e.filter},I=function(e){return e.pizzas},L=n(488),S=function(){var e=(0,d.s0)(),r=(0,E.T)(),n=(0,u.useRef)(!1),a=(0,u.useRef)(!1),h=(0,l.v9)(R),m=h.categoryId,g=h.sortType,C=h.currentPage,y=h.searchValue,_=(0,l.v9)(I),w=_.status,k=_.itemsPizza,b=(0,u.useCallback)((function(e){r((0,x.uA)(e))}),[]),S=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var n,t,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.sortProperty.includes("-")?"asc":"desc",t=g.sortProperty.replace("-",""),s=0===m?"":"category="+m,r((0,Z.qR)({order:n,sortBy:t,category:s,searchValue:y,currentPage:C}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){if(window.location.search){var e=o().parse(window.location.search.substring(1)),t=v.find((function(r){return r.sortProperty===e.sortProperty}));t&&(e.sort=t,delete e.sortProperty),r((0,x.rr)(e)),n.current=!0}}),[]),(0,u.useEffect)((function(){n.current||S(),n.current=!1,window.scrollTo(0,0)}),[m,g,y,C]),(0,u.useEffect)((function(){if(a.current){var r=o().stringify({sortProperty:g.sortProperty,categoryId:m,currentPage:C});e("?".concat(r))}a.current=!0}),[C,m,g.sortProperty]),(0,p.jsxs)("div",{className:"container",children:[(0,p.jsxs)("div",{className:"content__top",children:[(0,p.jsx)(f,{value:m,onChangeCategory:b}),(0,p.jsx)(j,{value:g})]}),(0,p.jsx)("h2",{className:"content__title",children:"\u0412\u0441\u0435 \u043f\u0438\u0446\u0446\u044b"}),w===L.q.ERROR?(0,p.jsxs)("div",{className:"content__error-info",children:[(0,p.jsx)("h2",{children:"Error 404 \ud83d\ude15 "}),(0,p.jsx)("p",{children:"Unfortunately we could not fetch data.Please try again later..."})]}):(0,p.jsx)("div",{className:"content__items",children:w===L.q.LOADING?(0,s.Z)(new Array(4)).map((function(e,r){return(0,p.jsx)(N,{},r)})):k.map((function(e){return(0,p.jsx)(z,(0,t.Z)((0,t.Z)({},e),{},{img:e.imageUrl,title:e.name}),e.id)}))}),(0,p.jsx)(P,{currentPage:C,onChangePage:function(e){return function(e){r((0,x.D4)(e))}(e)}})]})}},4654:function(){}}]);
//# sourceMappingURL=317.95152ecc.chunk.js.map